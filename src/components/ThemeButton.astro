---
import Button from "./Button.astro";


---

<Button id="theme-selector" intent="icon" padding="md" icon="sun" viewBox="0 0 24 24"/>

<script is:inline>
  // const themeToggleButton = querySelector('#themeToggle')
  // const theme = (() => {
  //   if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
  //     return localStorage.getItem("theme");
  //   }
  //   if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
  //     return "dark";
  //   }
  //   return "light";
  // })();

  // if (theme === "light") {
  //   document.documentElement.classList.remove("dark");
  // } else {
  //   document.documentElement.classList.add("dark");
  // }
  // window.localStorage.setItem("theme", theme);
  
  // const handleToggleClick = () => {
  //   console.log('asdf')
  //   const element = document.documentElement;
  //   element.classList.toggle("dark");

  //   const isDark = element.classList.contains("dark");
  //   localStorage.setItem("theme", isDark ? "dark" : "light");
  // };

  if (localStorage.theme === 'dark') {
    localStorage.theme = 'light';
    document.documentElement.classList.remove('dark')
  } else {
    localStorage.theme = 'dark';
    document.documentElement.classList.add('dark')
  }


  document.getElementById('theme-selector')?.addEventListener('click', () => {
    if (localStorage.theme === 'dark') {
      localStorage.theme = 'light';
      document.documentElement.classList.remove('dark');
    } else {
      localStorage.theme = 'dark';
      document.documentElement.classList.add('dark');
    }
  });
</script>
