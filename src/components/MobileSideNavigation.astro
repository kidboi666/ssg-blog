---
import { getCollection } from "astro:content";
import CategoryList from "./CategoryList.astro";
import Button from "./Button.astro";

const categories = ["HTML", "CSS", "JavaScript", "React"] as const;
---

<nav
  class="fixed left-0 top-0 z-50 h-dvh w-80 overflow-y-scroll border border-zinc-200 bg-white p-5 scrollbar-none md:hidden"
>
  <div class="flex items-start gap-4">
    <div class="flex flex-1 flex-col gap-2">
      {
        categories.map(async (category) => {
          const posts = await getCollection(category);

          return <CategoryList category={category} posts={posts} />;
        })
      }
    </div>
    <Button
      id="close-sidebar-button"
      intent="icon"
      padding="md"
      icon="cancel"
    />
  </div>
</nav>
<div
  id="background"
  class="fixed bottom-0 left-0 right-0 top-0 z-40 size-full bg-black/25 backdrop-blur-sm md:hidden"
>
</div>

<script is:inline>
  const closeButton = document.querySelector("#close-sidebar-button");
  const background = document.querySelector("#background");

  const closeSidebar = () => sidebar.classList.add("-translate-x-full");

  closeButton.addEventListener("click", closeSidebar);
  background.addEventListener("click", closeSidebar);
</script>
